(this.webpackJsonpqueer=this.webpackJsonpqueer||[]).push([[0],{25:function(e,t){function n(e){var t="string"===typeof e?function(e){if(e.startsWith("#")&&(e=e.substring(1)),3===e.length)e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2);else if(6!==e.length)throw new Error("Invalid hex color: "+e);for(var t=[],n=0;n<=2;n++)t[n]=parseInt(e.substr(2*n,2),16);return t}(e):e;return.2126*t[0]+.7152*t[1]+.0722*t[2]}e.exports={getContrastingColorFromHex:function(e){return n(e)>=165?"#000":"#fff"},string2color:function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);for(var r="#",a=0;a<3;a++){r+=("00"+(t>>8*a&255).toString(16)).substr(-2)}return r}}},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(26),o=n.n(c),s=(n(32),n(18)),i=n(3),l=n(6),u=(n(33),n(34),n(35),n(2)),h=n(17),j=n(27),b=n(25),f=n(4),d=["tag","style"];function g(e){var t=e.tag,n=e.style,r=Object(j.a)(e,d),a=Object(b.string2color)(t),c=Object(b.getContrastingColorFromHex)(a);return Object(f.jsx)("button",Object(h.a)(Object(h.a)({},r),{},{style:Object(h.a)(Object(h.a)({},n),{},{backgroundColor:a,color:c}),children:t}))}function p(e){var t=new URL(window.location),n=new URLSearchParams([].concat(Object(l.a)(Array.from(t.searchParams.entries()).filter((function(t){var n=Object(i.a)(t,1)[0];return!e.has(n)}))),Object(l.a)(Object(l.a)(e.entries()).filter((function(e){var t=Object(i.a)(e,2)[1];return String(t).length>0})))).sort((function(e,t){var n=Object(i.a)(e,1)[0],r=Object(i.a)(t,1)[0];return n.localeCompare(r)}))).toString();t=new URL("".concat(t.origin).concat(t.pathname).concat(n.length>0?"?"+n:"")),window.history.pushState({},"",t)}function O(){var e=a.a.useState(null),t=Object(i.a)(e,2),n=t[0],r=t[1],c=a.a.useState([]),o=Object(i.a)(c,2),s=o[0],h=o[1],j=a.a.useState(null),b=Object(i.a)(j,2),d=b[0],O=b[1],w=a.a.useState(null),m=Object(i.a)(w,2),x=m[0],v=m[1],S=a.a.useState(null),y=Object(i.a)(S,2),C=y[0],k=y[1],P=a.a.useState(new Set),L=Object(i.a)(P,2),A=L[0],R=L[1],U=a.a.useCallback((function(){var e=new URL(window.location),t=e.searchParams.get("lat")||"",n=e.searchParams.get("lon")||"",r=(e.searchParams.get("tags")||"").split(",").filter(Boolean),a={};"string"===typeof t&&t.length>0&&"string"===typeof n&&n.length>0&&(a.lat=t,a.lon=n),console.log("tags",r),Array.isArray(r)&&r.length>0&&(a.tags=r.join(","));var c=new URLSearchParams(a).toString(),o="".concat(window.urls.api,"resources.json").concat(c.length>0?"?"+c:"");console.log(o),fetch(o).then((function(e){return e.json()})).then((function(e){h(e.resources),console.log(e.resources)}))}),[]),q=a.a.useCallback((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){r("");var t=e.coords.latitude,n=e.coords.longitude;v(t),k(n),p(new URLSearchParams([["lat",t],["lon",n]])),U()}),(function(e){r(e.message)})):r("Geolocation is not supported by this browser.")}),[U]),E=a.a.useCallback((function(){v(null),k(null),p(new URLSearchParams([["lat",""],["lon",""]])),U()}),[U]),B=a.a.useCallback((function(e){A.has(e)?A.delete(e):A.add(e),R(new Set(A)),p(new URLSearchParams([["tags",Object(l.a)(A).filter(Boolean).join(",")]])),U()}),[U,A]);return a.a.useEffect((function(){var e=new URL(window.location),t=e.searchParams.get("lat")||"";v(t);var n=e.searchParams.get("lon")||"";k(n);var r=(e.searchParams.get("tags")||"").split(",");R(new Set(r)),fetch(window.urls.api+"tags.json").then((function(e){return e.json()})).then((function(e){O(e.tags)})),U()}),[U]),Object(f.jsxs)("div",{className:"app_wrapper",children:[Object(f.jsx)("header",{children:Object(f.jsx)("h1",{children:"Queer Resources"})}),Object(f.jsxs)("main",{children:[Object(f.jsx)("a",{href:"https://github.com/thomasrosen/queer",target:"_blank",rel:"noreferrer",children:"Sourcecode"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),n&&Object(f.jsxs)("p",{children:["Error: ",n]}),Object(f.jsx)("button",{onClick:q,children:"Filter for resources near you"}),Object(f.jsx)("button",{onClick:E,children:"Clear location filter"}),x&&C?Object(f.jsxs)("p",{children:["Location: ",x," / ",C]}):null,Object(f.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",margin:"1rem 0"},children:d&&d.map((function(e){return Object(f.jsx)(g,{tag:e,"data-selected":A.has(e)?"true":"false",onClick:function(){return B(e)}},e)}))},A),s&&s.map((function(e){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:e.title}),Object(f.jsx)("p",{children:e.description}),Object(f.jsx)("a",{href:e.link,target:"_blank",rel:"noreferrer",children:e.link}),Object(f.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",margin:"1rem 0"},children:e.tags.map((function(e){return Object(f.jsx)(g,{tag:e,"data-selected":A.has(e)?"true":"false",onClick:function(){return B(e)}},e)}))})]},JSON.stringify(e))})),Object(f.jsx)(u.a,{})]})]})}function w(){return Object(f.jsx)("div",{})}var m=Object(s.a)([{path:"/",element:Object(f.jsx)(O,{}),children:[{path:"/",element:Object(f.jsx)(w,{})},{path:"*",element:Object(f.jsx)(w,{})}]}]);window.env="dev",window.urls={frontend:"https://queer.thomasrosen.me/",api:"https://queer.thomasrosen.me/api/"},"dev"===window.env&&(window.urls.frontend="http://0.0.0.0:3000/",window.urls.api="http://0.0.0.0:17215/api/"),o.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(u.c,{router:m,fallbackElement:"Loading\u2026"})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.28473458.chunk.js.map