{"version":3,"sources":["functions.js","redux/slices/filterSlice.js","redux/slices/resourcesSlice.js","components/Tag.js","components/Filters.js","components/App.js","components/pages/welcome.js","components/router.js","redux/store.js","index.js"],"names":["luma","color","rgb","startsWith","substring","length","charAt","Error","i","parseInt","substr","hexToRGBArray","module","exports","getContrastingColorFromHex","string2color","str","hash","charCodeAt","toString","pushReplaceSearchParams","new_searchParams","url","URL","window","location","old_search_params_string","searchParams","new_search_params_string","URLSearchParams","Array","from","entries","filter","_ref","key","has","_ref2","value","String","sort","_ref3","_ref4","key_a","key_b","localeCompare","concat","origin","pathname","history","pushState","filterSlice","createSlice","name","initialState","tags","selectedTags","queryText","latitude","longitude","reducers","setTags","state","action","payload","setSelectedTags","toggleTag","includes","tag","push","Boolean","join","setQueryText","setGeoLocation","clearGeoLocation","actions","selectTags","selectSelectedTags","selectQueryText","selectGeoLocation","resourcesSlice","resources","setResources","fetchResources","createAsyncThunk","async","thunkApi","console","log","dispatch","getState","search_params_data","lat","lon","filtered_selectedTags","isArray","q","search_params","urls","api","fetch","then","response","json","data","selectResources","Tag","style","props","_objectWithoutProperties","_excluded","textColor","_jsx","_objectSpread","backgroundColor","children","Filters","onError","useDispatch","useSelector","loadResources","React","useCallback","loadTags","current_url","get","getLocation","navigator","geolocation","getCurrentPosition","position","coords","error","message","clearLocation","thisToggleTag","queryTextChanged","event","target","useEffect","reload","selected_tags","split","new_query_text","addEventListener","removeEventListener","_jsxs","className","onClick","map","margin","type","placeholder","defaultValue","onChange","get_smaller_url","regex","replace","App","showFilters","setShowFilters","useState","setError","toggleFilters","href","rel","resource","links","main_link","hasOwnProperty","link","title","contact","phoneNumber","parsePhoneNumber","phone","getURI","formatInternational","email","description","display","JSON","stringify","Outlet","Welcome","router","createHashRouter","path","element","configureStore","reducer","filterReducer","resourcesReducer","isLocalhost","hostname","env","frontend","dev_domain","ReactDOM","render","StrictMode","ReduxProvider","store","RouterProvider","fallbackElement","document","getElementById"],"mappings":"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","file":"static/js/main.5a91a05e.chunk.js","sourcesContent":["function hexToRGBArray(color) {\n  if (color.startsWith('#')) {\n    color = color.substring(1)\n  }\n\n  if (color.length === 3) {\n    color = color.charAt(0) + color.charAt(0) + color.charAt(1) + color.charAt(1) + color.charAt(2) + color.charAt(2);\n  } else if (color.length !== 6) {\n    throw (new Error('Invalid hex color: ' + color));\n  }\n\n  let rgb = [];\n  for (var i = 0; i <= 2; i++) {\n    rgb[i] = parseInt(color.substr(i * 2, 2), 16);\n  }\n\n  return rgb;\n}\nfunction luma(color) {\n  // color can be a hex string or an array of RGB values 0-255\n  const rgb = (typeof color === 'string') ? hexToRGBArray(color) : color;\n  return (0.2126 * rgb[0]) + (0.7152 * rgb[1]) + (0.0722 * rgb[2]); // SMPTE C, Rec. 709 weightings\n}\nfunction getContrastingColorFromHex(color) {\n  // source: https://stackoverflow.com/questions/635022/calculating-contrasting-colours-in-javascript\n  // exact answer: https://stackoverflow.com/a/6511606/2387277\n  // example: https://jsfiddle.net/thomasrosen/9njo6t7s/20/\n\n  return (luma(color) >= 165) ? '#000' : '#fff';\n}\n\nfunction string2color(str) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let color = '#';\n  for (let i = 0; i < 3; i++) {\n    let value = (hash >> (i * 8)) & 0xFF;\n    color += ('00' + value.toString(16)).substr(-2);\n  }\n  return color;\n}\n\nmodule.exports = {\n  getContrastingColorFromHex,\n  string2color,\n};\n","import { createSlice } from '@reduxjs/toolkit'\n\nfunction pushReplaceSearchParams(new_searchParams) {\n  let url = new URL(window.location)\n\n  const old_search_params_string = url.searchParams.toString()\n\n  const new_search_params_string = new URLSearchParams(\n    [\n      ...(\n        Array.from(url.searchParams.entries())\n          .filter(([key]) => !new_searchParams.has(key))\n      ),\n      ...(\n        [...new_searchParams.entries()]\n          .filter(([, value]) => String(value).length > 0)\n      ),\n    ]\n      .sort(([key_a], [key_b]) => key_a.localeCompare(key_b)) // sort alphabetically\n  ).toString()\n\n  if (old_search_params_string !== new_search_params_string) {\n    url = new URL(`${url.origin}${url.pathname}${new_search_params_string.length > 0 ? '?' + new_search_params_string : ''}`)\n    window.history.pushState({}, '', url)\n  }\n}\n\nexport const filterSlice = createSlice({\n  name: 'filter',\n  initialState: {\n    tags: [],\n    selectedTags: [],\n    queryText: '',\n    latitude: 0,\n    longitude: 0,\n  },\n  reducers: {\n    setTags: (state, action) => {\n      state.tags = action.payload\n    },\n    setSelectedTags: (state, action) => {\n      state.selectedTags = action.payload\n    },\n    toggleTag: (state, action) => {\n      if (state.selectedTags.includes(action.payload)) {\n        state.selectedTags = state.selectedTags.filter(tag => tag !== action.payload)\n      } else {\n        state.selectedTags.push(action.payload)\n      }\n\n      state.selectedTags = state.selectedTags.filter(Boolean)\n\n      if (state.selectedTags.length === 0) {\n        pushReplaceSearchParams(new URLSearchParams([\n          ['tags', ''],\n        ]))\n      } else {\n        pushReplaceSearchParams(new URLSearchParams([\n          ['tags', state.selectedTags.join(',')],\n        ]))\n      }\n    },\n    setQueryText: (state, action) => {\n      state.queryText = action.payload\n\n      if (state.queryText.length === 0) {\n        pushReplaceSearchParams(new URLSearchParams([\n          ['q', ''],\n        ]))\n      } else {\n        pushReplaceSearchParams(new URLSearchParams([\n          ['q', state.queryText],\n        ]))\n      }\n    },\n    setGeoLocation: (state, action) => {\n      state.latitude = action.payload.latitude\n      state.longitude = action.payload.longitude\n\n      pushReplaceSearchParams(new URLSearchParams([\n        ['lat', state.latitude],\n        ['lon', state.longitude],\n      ]))\n    },\n    clearGeoLocation: (state) => {\n      state.latitude = null\n      state.longitude = null\n\n      pushReplaceSearchParams(new URLSearchParams([\n        ['lat', ''],\n        ['lon', ''],\n      ]))\n    }\n  }\n})\n\nexport const {\n  setTags,\n  setSelectedTags,\n  toggleTag,\n  setQueryText,\n  setGeoLocation,\n  clearGeoLocation,\n} = filterSlice.actions\n\nexport const selectTags = state => state.filter.tags\nexport const selectSelectedTags = state => state.filter.selectedTags.filter(Boolean)\nexport const selectQueryText = state => state.filter.queryText\nexport const selectGeoLocation = state => ({\n  latitude: state.filter.latitude,\n  longitude: state.filter.longitude,\n})\n\nexport default filterSlice.reducer\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\n\nexport const resourcesSlice = createSlice({\n  name: 'resources',\n  initialState: {\n    resources: [],\n  },\n  reducers: {\n    setResources: (state, action) => {\n      state.resources = action.payload\n    },\n  }\n})\n\nexport const {\n  setResources,\n} = resourcesSlice.actions\n\nexport const fetchResources = createAsyncThunk('resources/fetchResources', async (value, thunkApi) => {\n  console.log('fetchResources')\n  const {\n    dispatch,\n    getState,\n  } = thunkApi || {}\n\n  const { filter } = getState()\n\n  const {\n    latitude,\n    longitude,\n    selectedTags,\n    queryText,\n  } = filter || {}\n\n  const search_params_data = {}\n\n  if (\n    latitude !== null && String(latitude).length > 0\n    && longitude !== null && String(longitude).length > 0\n  ) {\n    search_params_data.lat = latitude\n    search_params_data.lon = longitude\n  }\n\n  const filtered_selectedTags = selectedTags.filter(Boolean)\n  if (Array.isArray(filtered_selectedTags) && filtered_selectedTags.length > 0) {\n    search_params_data.tags = filtered_selectedTags.join(',')\n  }\n\n  if (typeof queryText === 'string' && queryText.length > 0) {\n    search_params_data.q = queryText\n  }\n\n  const search_params = new URLSearchParams(search_params_data).toString()\n\n  const url = `${window.urls.api}resources.json${search_params.length > 0 ? '?' + search_params : ''}`;\n\n  console.log('url', url)\n\n  fetch(url)\n    .then(response => response.json())\n    .then(data => {\n      console.log('data', data)\n      dispatch(setResources(data.resources))\n    })\n})\n\nexport const selectResources = state => state.resources.resources\n\nexport default resourcesSlice.reducer\n","import React from 'react'\n\nimport {\n  getContrastingColorFromHex,\n  string2color,\n} from '../functions.js'\n\nexport default function Tag({\n  tag,\n  style,\n  ...props\n}) {\n  const color = string2color(tag) // TODO make sure to only run this once\n  // TODO define the colors instead of generating them\n  const textColor = getContrastingColorFromHex(color) // TODO make sure to only run this once\n\n  return <button\n    {...props}\n    style={{\n      backgroundColor: color,\n      color: textColor,\n      ...style,\n    }}\n  >\n    {tag}\n  </button>\n}\n","import React from 'react'\nimport './App.css'\n\nimport '../fonts/ubuntu-v15-latin/index.css'\nimport '../fonts/ubuntu-mono-v10-latin/index.css'\n\nimport Tag from './Tag.js'\n\nimport { useSelector, useDispatch } from 'react-redux'\nimport {\n  setTags,\n  setSelectedTags,\n  toggleTag,\n  setQueryText,\n  setGeoLocation,\n  clearGeoLocation,\n\n  selectTags,\n  selectSelectedTags,\n  selectQueryText,\n  selectGeoLocation,\n} from '../redux/slices/filterSlice.js'\nimport {\n  fetchResources,\n  selectResources,\n} from '../redux/slices/resourcesSlice.js'\n\nexport default function Filters({\n  onError = () => { },\n}) {\n  const dispatch = useDispatch()\n\n  const tags = useSelector(selectTags)\n  const selectedTags = useSelector(selectSelectedTags)\n  const queryText = useSelector(selectQueryText)\n  const { latitude, longitude } = useSelector(selectGeoLocation)\n\n  const resources = useSelector(selectResources)\n\n  const loadResources = React.useCallback(() => {\n    dispatch(fetchResources())\n  }, [dispatch])\n\n  const loadTags = React.useCallback(() => {\n\n    const current_url = new URL(window.location);\n    const latitude = (current_url.searchParams.get('lat') || '')\n    const longitude = (current_url.searchParams.get('lon') || '')\n\n    const search_params_data = {}\n\n    if (\n      typeof latitude === 'string' && latitude.length > 0 &&\n      typeof longitude === 'string' && longitude.length > 0\n    ) {\n      search_params_data.lat = latitude\n      search_params_data.lon = longitude\n    }\n\n    const search_params = new URLSearchParams(search_params_data).toString()\n\n    const url = `${window.urls.api}tags.json${search_params.length > 0 ? '?' + search_params : ''}`;\n\n    fetch(url)\n      .then((response) => response.json())\n      .then((data) => {\n        dispatch(setTags(data.tags))\n        loadResources()\n      })\n\n  }, [dispatch, loadResources])\n\n  const getLocation = React.useCallback(() => {\n\n    // dispatch(setGeoLocation({\n    //   latitude: 48.1351253,\n    //   longitude: 11.5819806,\n    // }))\n\n    // loadTags()\n    // loadResources()\n\n    // onError('')\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition((position) => {\n        onError('')\n\n        dispatch(setGeoLocation({\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n        }))\n\n        loadTags()\n        loadResources()\n      }, (error) => {\n        onError(error.message)\n      })\n    } else {\n      onError('Geolocation is not supported by this browser.')\n    }\n  }, [dispatch, onError, loadTags, loadResources])\n\n  const clearLocation = React.useCallback(() => {\n    dispatch(clearGeoLocation())\n    loadTags()\n    loadResources()\n  }, [dispatch, loadTags, loadResources])\n\n  const thisToggleTag = React.useCallback(tag => {\n    dispatch(toggleTag(tag))\n    loadResources()\n  }, [dispatch, loadResources])\n\n  const queryTextChanged = React.useCallback(event => {\n    if (event) {\n      dispatch(setQueryText(event.target.value))\n      loadResources()\n    }\n  }, [dispatch, loadResources])\n\n  React.useEffect(() => {\n\n    function reload() {\n      const current_url = new URL(window.location);\n\n      const latitude = (current_url.searchParams.get('lat') || '')\n      const longitude = (current_url.searchParams.get('lon') || '')\n      dispatch(setGeoLocation({ latitude, longitude }))\n\n      const selected_tags = (current_url.searchParams.get('tags') || '').split(',')\n      dispatch(setSelectedTags(selected_tags))\n\n      const new_query_text = current_url.searchParams.get('q') || ''\n      dispatch(setQueryText(new_query_text))\n\n      loadResources()\n    }\n    reload()\n    window.addEventListener('popstate', reload)\n\n    return () => {\n      window.removeEventListener('popstate', reload)\n    }\n  }, [dispatch, loadResources])\n\n  React.useEffect(() => {\n    loadTags()\n  }, [loadTags, latitude, longitude])\n\n  return <div>\n    <h2>Filter for resources in near you:</h2>\n    <div className=\"tag_row\">\n      <button onClick={getLocation}>Get my Location</button>\n      {\n        latitude && longitude\n          ? <button onClick={clearLocation}>Clear Location</button>\n          : null\n      }\n    </div>\n    {\n      latitude && longitude\n        ? <p>Your Location: {latitude} / {longitude}</p>\n        : null\n    }\n\n    <br />\n    <h2>Filter by tag:</h2>\n    <div className=\"tag_row\">\n      {tags && tags.map(tag => {\n        return <Tag\n          key={tag}\n          tag={tag}\n          data-selected={selectedTags.includes(tag) ? 'true' : 'false'}\n          onClick={() => thisToggleTag(tag)}\n        />\n      })}\n    </div>\n\n    <br />\n    <h2>Search:</h2>\n    <input\n      style={{ margin: '20px 0' }}\n      type=\"search\"\n      placeholder=\"Search‚Ä¶\"\n      defaultValue={queryText}\n      onChange={queryTextChanged}\n    />\n\n    <br />\n    <br />\n    <h2>Result Summary:</h2>\n    <br />\n    {\n      resources.length === 0\n        ? <p>No resources found.</p>\n        : null\n    }\n    {\n      resources.length === 1\n        ? <p>One resources found.</p>\n        : null\n    }\n    {\n      resources.length > 1\n        ? <p>{resources.length} resources found.</p>\n        : null\n    }\n\n  </div>\n}\n","import React from 'react';\nimport './App.css';\n\nimport '../fonts/ubuntu-mono-v10-latin/index.css';\nimport '../fonts/ubuntu-v15-latin/index.css';\n\nimport parsePhoneNumber from 'libphonenumber-js'; // TODO move this to the backend to save bandwidth on the client\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  Outlet,\n} from 'react-router-dom';\nimport {\n  selectSelectedTags,\n  toggleTag,\n} from '../redux/slices/filterSlice.js';\nimport {\n  fetchResources,\n  selectResources,\n} from '../redux/slices/resourcesSlice.js';\nimport Filters from './Filters.js';\nimport Tag from './Tag.js';\n\nfunction get_smaller_url(url) {\n  // check if url only contains exactly three slashes\n  if (url.split('/').length <= 4) {\n    // url is only a domain\n    const regex = /.*:\\/\\/(?:www\\.)?([^/]*).*/gm\n    const smaller_url = url.replace(regex, `$1`)\n    return smaller_url\n  }\n\n  // url has a path so return full url\n  return url\n}\n\nexport default function App() {\n\n  const dispatch = useDispatch()\n\n  const resources = useSelector(selectResources)\n  const selectedTags = useSelector(selectSelectedTags)\n\n  const thisToggleTag = React.useCallback(tag => {\n    dispatch(toggleTag(tag))\n    dispatch(fetchResources())\n  }, [dispatch])\n\n  const [showFilters, setShowFilters] = React.useState(false)\n\n  const [error, setError] = React.useState(null)\n\n  const toggleFilters = () => {\n    setShowFilters(showFilters => !showFilters)\n  }\n\n  return <div className={`app_wrapper ${showFilters === true ? 'show_filters' : 'hide_filters'}`}>\n    <header>\n\n      {\n        showFilters === true\n          ? <button\n            className=\"hide_on_large_screens\"\n            onClick={toggleFilters}\n          >\n            Close Filters\n          </button>\n          : null\n      }\n\n      <h1>üè≥Ô∏è‚Äçüåà QR</h1>\n\n      <a href=\"https://github.com/thomasrosen/queer\" target=\"_blank\" rel=\"noreferrer\">Sourcecode</a>\n    </header>\n\n    <nav>\n      <Filters\n        onError={setError}\n      />\n    </nav>\n\n    <main>\n      <h1>üè≥Ô∏è‚Äçüåà Queer Resources</h1>\n\n      <br />\n\n      <p>A collection of resources for queer people. You're of course also welcome to look through the information if you are an ally.</p>\n\n      <p>You can filter the links via your location and some tags.</p>\n\n      <p>\n        The website is maintained by <a href=\"https://thomasrosen.me/\">Thomas Rosen</a>.<br />\n        Send an email to <a href=\"mailto:queer@thomasrosen.me\">queer@thomasrosen.me</a> if you want to add a resource.\n      </p>\n\n      <p>\n        Your privacy is important to me. The website saves no data about you. I have analytics enabled, but these are fully annonymous. Look at the source code or ask me, if you need more information.<br />\n        And fyi the website is hosted at <a href=\"https://uberspace.de/\" target=\"_blank\" rel=\"noreferrer\">Uberspace</a> in the EU.\n      </p>\n\n      <div className=\"hide_on_large_screens\">\n        <br />\n        <button\n          onClick={toggleFilters}\n        >\n          {showFilters === true ? 'Close Filters' : 'Open Filters'}\n        </button>\n        <br />\n      </div>\n\n      <br />\n      <br />\n\n      {error && <p>Error: {error}</p>}\n\n      {\n        resources &&\n        resources.map(resource => {\n          const links = []\n\n          let main_link = null\n          if (resource.hasOwnProperty('link')) {\n            if (Array.isArray(resource.link) && resource.link.length > 0) {\n              main_link = resource.link[0]\n              links.push(...resource.link.map(link => ({\n                url: link,\n                title: get_smaller_url(link),\n              })))\n            } else if (typeof resource.link === 'string') {\n              main_link = resource.link\n              links.push({\n                url: resource.link,\n                title: get_smaller_url(resource.link),\n              })\n            }\n          }\n\n          if (\n            resource.hasOwnProperty('contact')\n            && Array.isArray(resource.contact)\n            && resource.contact.length > 0\n          ) {\n            for (const contact of resource.contact) {\n              if (contact.hasOwnProperty('phone')) {\n                const phoneNumber = parsePhoneNumber(contact.phone)\n                links.push({\n                  url: phoneNumber.getURI(),\n                  title: phoneNumber.formatInternational(), // phoneNumber.formatNational() \n                })\n              }\n              if (contact.hasOwnProperty('email')) {\n                links.push({\n                  url: `mailto:${contact.email}`,\n                  title: contact.email,\n                })\n              }\n            }\n          }\n\n          return <div key={JSON.stringify(resource)}>\n            <h3>\n              {\n                main_link !== null\n                  ? <a href={main_link} target=\"_blank\" rel=\"noreferrer\">\n                    {resource.title}\n                  </a>\n                  : resource.title\n              }\n            </h3>\n            {\n              !!resource.description && resource.description.length > 0\n                ? <p>{resource.description}</p>\n                : null\n            }\n\n            <div className=\"tag_row small\">\n              {\n                links.map(({ title, url }) => {\n                  return <a key={url} href={url} className=\"body2\" style={{ display: 'block' }}>\n                    {title}\n                  </a>\n                })\n              }\n            </div>\n\n            <div className=\"tag_row small\">\n              {\n                resource.tags.map(tag => {\n                  return <Tag\n                    className=\"small\"\n                    key={tag}\n                    tag={tag}\n                    data-selected={selectedTags.includes(tag) ? 'true' : 'false'}\n                    onClick={() => thisToggleTag(tag)}\n                  />\n                })\n              }\n            </div>\n            <br />\n          </div>\n        })\n      }\n      {\n        resources && resources.length === 0\n          ? <p>No resources found.</p>\n          : null\n      }\n      {\n        !resources\n          ? <p>Loading...</p>\n          : null\n      }\n\n      <Outlet />\n    </main>\n\n  </div>\n}\n","export default function Welcome() {\n  return <div>\n      \n  </div>\n}\n","import {\n  createHashRouter,\n} from 'react-router-dom'\n\nimport App from './App.js'\nimport Welcome from './pages/welcome.js'\n\nexport const router = createHashRouter([\n  {\n    path: '/',\n    element: <App />,\n    children: [\n      {\n        path: '/',\n        element: <Welcome />,\n      },\n      {\n        path: '*',\n        element: <Welcome />,\n      },\n    ]\n  },\n]);\n","import { configureStore } from '@reduxjs/toolkit'\nimport filterReducer from './slices/filterSlice.js'\nimport resourcesReducer from './slices/resourcesSlice.js'\n\nexport default configureStore({\n  reducer: {\n    filter: filterReducer,\n    resources: resourcesReducer,\n  }\n})\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nimport { router } from './components/router.js';\nimport {\n  RouterProvider,\n} from 'react-router-dom'\n\nimport { Provider as ReduxProvider } from 'react-redux'\nimport store from './redux/store.js'\n\n// import reportWebVitals from './reportWebVitals';\n\n// check if domain is 0.0.0.0\nconst isLocalhost = Boolean(\n  window.location.hostname === '0.0.0.0' ||\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]'\n)\n\nwindow.env = isLocalhost === true ? 'dev' : 'prod'\nwindow.urls = {\n  frontend: 'https://queer.thomasrosen.me/',\n  api: 'https://queer.thomasrosen.me/api/',\n}\nif (window.env === 'dev') {\n  const dev_domain = 'localhost' // 0.0.0.0\n  window.urls.frontend = `http://${dev_domain}:3000/`\n  window.urls.api = `http://${dev_domain}:17215/api/`\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <ReduxProvider store={store}>\n      <RouterProvider\n        router={router}\n        fallbackElement=\"Loading‚Ä¶\"\n      />\n    </ReduxProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.info))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}